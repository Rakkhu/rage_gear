<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Rage Road Mode</title>
    <style>
      body { margin: 0; overflow: hidden; background: #111; touch-action: none; user-select: none; -webkit-user-select: none; }
      #ui-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
      .screen { position: absolute; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; background: rgba(0,0,0,0.8); pointer-events: auto; }
      .hidden { display: none !important; }
      button { padding: 15px 30px; font-size: 18px; margin: 10px; cursor: pointer; background: #ff4400; border: none; color: white; font-weight: bold; text-transform: uppercase; }
      button:active { transform: scale(0.95); }
      input { padding: 10px; font-size: 18px; text-align: center; }
      
      /* HUD */
      #hud { pointer-events: none; }
      .bar-container { position: absolute; bottom: 20px; left: 20px; width: 200px; height: 20px; background: #333; border: 2px solid #555; }
      .bar-fill { height: 100%; width: 100%; background: lime; transition: width 0.1s; }
      #boost-bar { bottom: 50px; }
      #boost-fill { background: orange; }
      #score-panel { position: absolute; top: 10px; left: 50%; transform: translateX(-50%); display: flex; gap: 20px; font-size: 24px; font-family: monospace; color: white; text-shadow: 1px 1px 0 #000; }
      .score-red { color: #ff4444; }
      .score-blue { color: #4444ff; }
      #timer { font-size: 30px; color: yellow; }
      #killfeed { position: absolute; top: 10px; left: 10px; color: white; font-family: sans-serif; font-size: 14px; text-shadow: 1px 1px 0 #000; }
      
      /* Mobile Controls */
      #mobile-controls { display: none; pointer-events: none; }
      .joystick-zone { position: absolute; bottom: 20px; width: 150px; height: 150px; pointer-events: auto; border: 1px dashed rgba(255,255,255,0.1); border-radius: 50%; }
      #joy-left { left: 30px; }
      #joy-right { right: 30px; }
      .btn-mobile { position: absolute; width: 60px; height: 60px; border-radius: 50%; background: rgba(255,255,255,0.2); pointer-events: auto; border: 2px solid white; bottom: 40px; }
      .btn-mobile:active { background: rgba(255,255,255,0.5); }
      #btn-fire { right: 180px; bottom: 40px; background: rgba(255,0,0,0.3); }
      #btn-boost { right: 120px; bottom: 110px; background: rgba(255,165,0,0.3); }
      #btn-rocket { right: 50px; bottom: 180px; background: rgba(0,0,255,0.3); }

      @media (pointer: coarse) {
        #mobile-controls { display: block; }
      }
    </style>
  </head>
  <body>
    <div id="game-container"></div>
    
    <div id="ui-layer">
      <!-- Menus -->
      <div id="menu-main" class="screen">
        <h1 style="color:white; font-size: 40px; text-transform: uppercase; font-style: italic;">Rage Road Mode</h1>
        <button id="btn-offline">Play Offline</button>
        <button id="btn-create">Create Lobby</button>
        <div style="margin-top:20px;">
           <input id="input-code" placeholder="Enter Invite Code" maxlength="5">
           <button id="btn-join">Join</button>
        </div>
      </div>

      <div id="menu-lobby" class="screen hidden">
        <h2 style="color:white">Lobby <span id="lobby-code"></span></h2>
        <div id="lobby-list" style="color:white; margin-bottom: 20px;"></div>
        <button id="btn-start" class="hidden">Start Match</button>
        <button id="btn-leave">Leave</button>
      </div>
      
      <div id="menu-end" class="screen hidden">
        <h1 id="winner-text" style="color:white">RED WINS</h1>
        <button id="btn-replay">Play Again</button>
        <button id="btn-menu">Main Menu</button>
      </div>

      <!-- HUD -->
      <div id="hud" class="hidden">
        <div id="score-panel">
           <div class="score-red" id="score-r">0</div>
           <div id="timer">04:00</div>
           <div class="score-blue" id="score-b">0</div>
        </div>
        <div id="killfeed"></div>
        <div class="bar-container" id="hp-bar"><div class="bar-fill" id="hp-fill"></div></div>
        <div class="bar-container" id="boost-bar"><div class="bar-fill" id="boost-fill"></div></div>
      </div>

      <!-- Mobile Overlay -->
      <div id="mobile-controls">
         <div id="joy-left" class="joystick-zone"></div>
         <div id="joy-right" class="joystick-zone"></div>
         <div id="btn-fire" class="btn-mobile"></div>
         <div id="btn-boost" class="btn-mobile"></div>
         <div id="btn-rocket" class="btn-mobile"></div>
      </div>
    </div>
    
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
